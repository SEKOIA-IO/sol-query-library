// this query allows you to count the number of events by each intake over a specified time period (default is last 24 hours)

let earliestTime = ago(24h);
let lastestTime = now();

events
| where timestamp between (earliestTime .. lastestTime)
| inner join intakes on sekoiaio.intake.uuid == uuid   // sekoiaio.intake.uuid belongs to events table and uuid belongs to intakes table
| aggregate count() by intake.name
| order by count desc
| render barchart with (x=count,y=intake.name)